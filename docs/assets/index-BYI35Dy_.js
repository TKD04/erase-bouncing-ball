var $=i=>{throw TypeError(i)};var G=(i,e,s)=>e.has(i)||$("Cannot "+s);var t=(i,e,s)=>(G(i,e,"read from private field"),s?s.call(i):e.get(i)),r=(i,e,s)=>e.has(i)?$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,s),n=(i,e,s,l)=>(G(i,e,"write to private field"),l?l.call(i,s):e.set(i,s),s),c=(i,e,s)=>(G(i,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const a of h)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function s(h){const a={};return h.integrity&&(a.integrity=h.integrity),h.referrerPolicy&&(a.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?a.credentials="include":h.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(h){if(h.ep)return;h.ep=!0;const a=s(h);fetch(h.href,a)}})();var _,W;class ct{constructor(e,s){r(this,_);r(this,W);if(e<=0)throw new RangeError("width must be greater than zero.");if(s<=0)throw new RangeError("height must be greater than zero.");n(this,W,e),n(this,_,s)}get height(){return t(this,_)}get width(){return t(this,W)}}_=new WeakMap,W=new WeakMap;var U;class C{constructor(e){r(this,U);if(e<0||e>255)throw new RangeError("value must be in the range 0-255.");n(this,U,e)}get value(){return t(this,U)}}U=new WeakMap;var I,N;class j{constructor(e,s){r(this,I);r(this,N);n(this,I,e),n(this,N,s)}get x(){return t(this,I)}get y(){return t(this,N)}move(e){n(this,I,t(this,I)+e.x),n(this,N,t(this,N)+e.y)}}I=new WeakMap,N=new WeakMap;var k,H,F;class K{constructor(e,s,l){r(this,k);r(this,H);r(this,F);n(this,F,e),n(this,H,s),n(this,k,l)}toString(){return`rgb(${t(this,F).value.toString()}, ${t(this,H).value.toString()}, ${t(this,k).value.toString()})`}}k=new WeakMap,H=new WeakMap,F=new WeakMap;var p,A;class v{constructor(e,s){r(this,p);r(this,A);n(this,p,e),n(this,A,s)}get x(){return t(this,p)}get y(){return t(this,A)}bounceBackX(){n(this,p,-t(this,p))}bounceBackY(){n(this,A,-t(this,A))}}p=new WeakMap,A=new WeakMap;var T,z,o,f,B,x,u,J,Q,Z,tt,et,it,st,rt;class ft{constructor(e){r(this,u);r(this,T);r(this,z,new K(new C(254),new C(254),new C(254)));r(this,o);r(this,f,10);r(this,B,20);r(this,x,{down:new v(0,t(this,B)),left:new v(-t(this,B),0),right:new v(t(this,B),0),up:new v(0,-t(this,B))});n(this,T,e),n(this,o,new j(Math.floor(e.width/2),Math.floor(e.height/2)))}get color(){return t(this,z).toString()}get radius(){return t(this,f)}get x(){return t(this,o).x}get y(){return t(this,o).y}moveToDown(){if(!c(this,u,J).call(this)){if(c(this,u,et).call(this)){const e=t(this,T).height-(t(this,o).y+t(this,f));t(this,o).move(new v(0,e));return}t(this,o).move(t(this,x).down)}}moveToLeft(){if(!c(this,u,Q).call(this)){if(c(this,u,it).call(this)){const e=-t(this,o).x+t(this,f);t(this,o).move(new v(e,0));return}t(this,o).move(t(this,x).left)}}moveToRight(){if(!c(this,u,Z).call(this)){if(c(this,u,st).call(this)){const e=t(this,T).width-(t(this,o).x+t(this,f));t(this,o).move(new v(e,0));return}t(this,o).move(t(this,x).right)}}moveToUp(){if(!c(this,u,tt).call(this)){if(c(this,u,rt).call(this)){const e=-t(this,o).y+this.radius;t(this,o).move(new v(0,e));return}t(this,o).move(t(this,x).up)}}}T=new WeakMap,z=new WeakMap,o=new WeakMap,f=new WeakMap,B=new WeakMap,x=new WeakMap,u=new WeakSet,J=function(){return t(this,o).y+t(this,f)===t(this,T).height},Q=function(){return t(this,o).x-t(this,f)===0},Z=function(){return t(this,o).x+t(this,f)===t(this,T).width},tt=function(){return t(this,o).y-t(this,f)===0},et=function(){return t(this,o).y+t(this,f)+t(this,B)>=t(this,T).height},it=function(){return t(this,o).x-t(this,f)-t(this,B)<=0},st=function(){return t(this,o).x+t(this,f)+t(this,B)>=t(this,T).width},rt=function(){return t(this,o).y-t(this,f)-t(this,B)<=0};var E;class dt{constructor(){r(this,E,new Map)}add(e,s){t(this,E).set(e,s)}getAll(){return[...t(this,E).values()]}length(){return t(this,E).size}remove(e){if(!t(this,E).has(e))throw new RangeError("ballId must be in the keys.");t(this,E).delete(e)}}E=new WeakMap;var P,V,Y,y,L,S,D,nt,ht;class wt{constructor(e,s,l,h,a,m){r(this,D);r(this,P);r(this,V);r(this,Y);r(this,y);r(this,L);r(this,S);if(h<=0)throw new RangeError("radius must be greater than zero.");n(this,P,e),n(this,y,s),n(this,S,l),n(this,L,h),n(this,V,a),n(this,Y,m)}get color(){return t(this,V).toString()}get id(){return t(this,Y)}get radius(){return t(this,L)}get x(){return t(this,y).x}get y(){return t(this,y).y}move(){c(this,D,nt).call(this)&&t(this,S).bounceBackX(),c(this,D,ht).call(this)&&t(this,S).bounceBackY(),t(this,y).move(t(this,S))}}P=new WeakMap,V=new WeakMap,Y=new WeakMap,y=new WeakMap,L=new WeakMap,S=new WeakMap,D=new WeakSet,nt=function(){return t(this,y).x-t(this,L)<=0||t(this,y).x+t(this,L)>=t(this,P).width},ht=function(){return t(this,y).y-t(this,L)<=0||t(this,y).y+t(this,L)>=t(this,P).height};const b=(i,e)=>{if(i>=e)throw new RangeError("min must be less than max.");return Math.floor(Math.random()*(e-i+1))+i},gt=()=>{const i=new C(b(65,254)),e=new C(b(65,254)),s=new C(b(65,254));return new K(i,e,s)},mt=(i,e)=>{const{height:s,width:l}=i,[h,a]=[-7,7],m=b(10,20);return new wt(i,new j(b(0+m,l-m),b(0+m,s-m)),new v(b(h,a),b(h,a)),m,gt(),e)},Bt=(i,e)=>{const s=new dt;for(let l=0;l<e;l+=1){const h=mt(i,l);s.add(l,h)}return s};var q;class yt{constructor(e){r(this,q);n(this,q,e)}render(e){t(this,q).textContent=e.toString()}}q=new WeakMap;const Tt=i=>i.tagName==="CANVAS",vt=i=>i.tagName==="SPAN";var R,O,d,M,w,g,ot,lt,at,X,ut;class Lt{constructor(){r(this,g);r(this,R);r(this,O);r(this,d);r(this,M);r(this,w);const e=document.querySelector("#js-billiards-table"),s=document.querySelector("#js-number-of-balls-left");if(e===null||!Tt(e))throw new TypeError("canvasBilliardsTable must be HTMLCanvasElement.");if(s===null||!vt(s))throw new TypeError("spanNumberOfBalls must be HTMLSpanElement.");const{innerHeight:l,innerWidth:h}=globalThis;e.width=h,e.height=l;const a=e.getContext("2d");if(a===null)throw new TypeError("ctx must be CanvasRenderingContext2D");n(this,d,a),n(this,O,new ct(h,l)),n(this,R,Bt(t(this,O),25)),n(this,w,new ft(t(this,O))),n(this,M,new yt(s))}start(){const e=()=>{c(this,g,at).call(this),c(this,g,lt).call(this),c(this,g,X).call(this),requestAnimationFrame(e)};globalThis.addEventListener("keydown",s=>{switch(s.key){case"a":case"ArrowLeft":{t(this,w).moveToLeft();break}case"ArrowDown":case"s":{t(this,w).moveToDown();break}case"ArrowRight":case"d":{t(this,w).moveToRight();break}case"ArrowUp":case"w":{t(this,w).moveToUp();break}default:return}c(this,g,X).call(this)}),t(this,M).render(t(this,R).length()),e()}}R=new WeakMap,O=new WeakMap,d=new WeakMap,M=new WeakMap,w=new WeakMap,g=new WeakSet,ot=function(e){t(this,d).beginPath(),t(this,d).fillStyle=e.color,t(this,d).arc(e.x,e.y,e.radius,0,2*Math.PI),t(this,d).fill()},lt=function(){for(const e of t(this,R).getAll())c(this,g,ut).call(this,e)&&(t(this,R).remove(e.id),t(this,M).render(t(this,R).length())),c(this,g,ot).call(this,e),e.move()},at=function(){t(this,d).fillStyle="rgba(0, 0, 0, 0.25)",t(this,d).fillRect(0,0,t(this,O).width,t(this,O).height)},X=function(){t(this,d).beginPath(),t(this,d).lineWidth=3,t(this,d).strokeStyle=t(this,w).color,t(this,d).arc(t(this,w).x,t(this,w).y,t(this,w).radius,0,2*Math.PI),t(this,d).stroke()},ut=function(e){const s=t(this,w).x-e.x,l=t(this,w).y-e.y;return Math.hypot(s,l)<t(this,w).radius+e.radius};const bt=new Lt;bt.start();
